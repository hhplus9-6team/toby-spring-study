# 2.1 UserDaoTest 다시 보기

## 서론

2장은 테스트를 통해 스프링과 객체지향 설계를 다시 바라보는 장입니다.

2.1은 그 출발점으로, `UserDaoTest`를 다시 살펴보며 테스트가 어떤 역할을 하고 어떤 한계를 가지는지를 정리합니다.

## 2.1.1 테스트의 유용성

```java
public class UserDaoTest {

    public static void main(String[] args) throws Exception {
        UserDao dao = new UserDao();

        User user = new User();
        user.setId("user1");
        user.setName("토비");
        user.setPassword("spring");

        dao.add(user);

        User user2 = dao.get("user1");

        if (!user.getName().equals(user2.getName())) {
            System.out.println("테스트 실패");
        } else {
            System.out.println("테스트 성공");
        }
    }
}
```

테스트가 있으면 다음과 같은 이점이 있습니다.

- 변경 후에도 기존 기능이 깨지지 않았음을 빠르게 확인할 수 있습니다.
- 수동 테스트에 비해 반복 실행이 쉽고, 실수를 줄일 수 있습니다.
- 코드가 의도한 대로 동작하는지를 개발자 스스로 증명할 수 있습니다.

## 2.1.2 UserDaoTest 의 특징

### 1) 웹을 통한 DAO 테스트 방법의 문제점

초기에는 DAO의 동작을 확인하기 위해 웹 화면이나 콘솔 프로그램을 통해 직접 테스트하는 방식을 떠올리기 쉽습니다.

예를 들어,

- 회원 가입 화면을 띄워서 데이터를 입력하고

- DB에 값이 들어갔는지 직접 확인하는 방식입니다.

하지만 이런 방식에는 명확한 문제가 있습니다.

- 테스트를 수행하기까지 준비 과정이 길고

- 한 번에 한 케이스만 확인 가능하며

- 반복 테스트가 매우 번거롭습니다.

### 2) 작은 단위의 테스트

```java
UserDao dao = new UserDao();
dao.add(user);
User user2 = dao.get(user.getId());
```

`UserDaoTest`는 웹이나 UI를 거치지 않고 DAO라는 아주 작은 단위를 직접 테스트합니다.

이처럼 테스트 대상을 작게 유지하면

- 문제 발생 시 원인 파악이 쉽고

- 다른 계층의 영향을 받지 않으며

- 빠른 실행이 가능합니다.

따라서, 테스트는 가능한 한 작은 단위로 작성하는 것이 좋습니다.

### 3) 자동수행 테스트 코드

```java
if (!user.getName().equals(user2.getName())) {
    System.out.println("테스트 실패");
} else {
    System.out.println("테스트 성공");
}
```

UserDaoTest는 사람이 직접 확인하지 않아도 코드 실행만으로 결과를 알 수 있도록 작성되어 있습니다.

이런 자동화된 테스트는

- 반복 실행이 가능하고

- 실수 가능성을 줄이며

- 언제든 다시 검증할 수 있습니다.

테스트는 자동으로 수행될 수 있을 때 비로소 의미를 가진다는 점을 보여줍니다.

### 4) 지속적인 개선과 점진적인 개발을 위한 테스트

테스트가 존재하면 기존 기능을 망가뜨릴까 두려워 코드를 수정하지 못하는 상황을 피할 수 있습니다.

- 리팩토링 이후에도 테스트가 통과하면

- 변경이 안전하다는 신호를 얻을 수 있습니다.

즉, 테스트는 점진적인 개선과 지속적인 개발을 가능하게 하는 안전망 역할을 합니다.

## 2.1.3 UserDaoTest 의 문제점

UserDaoTest는 위와 같은 장점이 있으나, 여전히 개선이 필요합니다.

### 1) 수동 확인 작업의 번거로움

```java
System.out.println("테스트 성공");
```

현재 테스트는 DB에 데이터가 직접 들어갔는지 확인하는 등 결과를 사람이 직접 눈으로 확인해야 합니다.

이 방식은

- 테스트 결과를 자동으로 판별하기 어렵고

- 테스트가 많아질수록 확인 작업이 부담이 됩니다.

테스트는 사람이 판단하지 않아도 성공/실패가 명확히 드러나야 한다는 문제가 남아 있습니다.

### 2) 실행 작업의 번거로움

`main()` 메서드를 직접 실행해야 하는 테스트 방식 역시 불편합니다.

- 테스트 클래스가 늘어날수록

- 각각을 일일이 실행해야 하며

- 전체 테스트 실행이 어렵습니다.

이는 테스트를 일상적인 개발 과정에 자연스럽게 녹여내기 어렵게 만듭니다.

---

### 질문

Q. 테스트가 없을 때 개발자가 겪는 심리적/실무적 문제를 설명해보세요.

---

### 출처

- 토비의 스프링 3.1 - Vol.1 스프링의 이해와 원리